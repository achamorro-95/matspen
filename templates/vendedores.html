{% extends "base.html" %}
{% block title %}Vendedores{% endblock %}
{% block content%}
<h1>Vendedores</h1>
<button onclick="abrirModal()" class="agregarnuevo">+Nuevo Vendedor</button>
<div id ="modalNuevo" class="modal">
    <div class ="modal-content">
        <span class="close" onclick="cerrarModal()">&times;</span>
        <h2>Nuevo Vendedor</h2>
        <form method="post" action="{{ url_for('agregar_vendedor') }}">
             <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <label>Nombre</label>
            <input type="text" name="nombre" required>

            <label>Telefono</label>
            <input type="text" name="telefono" required>

            <label>Activo</label>
            <input type="text" name="activo" required>

            <br><br>
            <button class="guardar" type="submit">Guardar</button>
        </form>
    </div>
</div>
<table broder="1" cellpadding="10" cellpadding="0" width = "100%">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Telefono</th>
            <th>Activo</th>
            <th>Accion</th>

        </tr>
    </thead> 
    <tbody>
        {% for v in vendedores %}
        <tr>
            <td>{{ v.nombre }}</td>
            <td> {{ v.telefono }}</td>
            <td> {{ v.activo }}</td>
            <td>
                <form method="POST" action="/vendedores/{{ v['id'] }}/eliminar"
                onsubmit="return confirm('Seguro quieres eliminar?');">
                 <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button type="submit"
                        style="padding:6px 10px; border:none; border-radius:6px;
                                background:#c62828; color:white; cursor:pointer;">
                    Eliminar
                </button>
            </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>

</table>
<style>
    .agregarnuevo{
        background: #c62828;
        color:#fff;
        border: none;
        position:  center;
        border-radius: 10px;
        padding:10px;
        cursor: pointer;
    }
    .modal{
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, .5);
        z-index: 9999;
        align-items: center;
        justify-content: center;
    }
    .modal-content{
        background:#fff;
        width: 600px;
        max-width: 90%;
        padding: 20px;
        border-radius: 12px;
       position : relative;
       color:#c62828;
    }
    .modal-content input{
        width: 100px;
        padding: 5px;
         margin:6px 0 12px 0;
         box-sizing: border-box;

    }
    .close{
        position:absolute;
        top:10px;
        right: 12px;
        font-size: 24px;
        cursor: pointer;
    }
</style>

<script>
    function abrirModal(){
        document.getElementById('modalNuevo').style.display = "flex";

    }
    function cerrarModal(){
        document.getElementById("modalNuevo").style.display = "none";
    }

    window.onclick = function(event){
        const modal = document.getElementById('modalNuevo');
        if(event.target === modal){
            modal.style.display="none";
        }
    }
</script>
{% endblock%}